<link rel="import" href="../balloon-css/balloon-css.html">
<link rel="import" href="../paper-fab/paper-fab.html">
<link rel="import" href="../clone-data/clone-data.html">
<link rel="import" href="../icon-icons/iron-icons.html">
<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-dropdown/iron-dropdown.html">
<!--
`<fab-menu></fab-menu>` makes FAB menu to give users options 
@demo demo.html
-->

<dom-module id="fab-menu">
  <template>
    <style>
      :host {
        display: inline-block
      }
      .bottom-right {
        position: absolute;
        bottom: 10px;
        right: 10px;
      }
      :host .vertical .dropdown-content {
        @apply(--layout-vertical);
      }
    </style>
    
    <paper-fab on-tap="toggle" data-balloon$="{{label}}" data-balloon-pos="left" icon="{{_mainIcon}}" class="bottom-right vertical"></paper-fab>
    <iron-dropdown opened="{{_up}}" id="dropdown" class="vertical bottom-right" vertical-align="bottom" horizontal-offset="0" vertical-offset="66">
      <div class="dropdown-content" style="overflow: visible">
        <template is="dom-repeat" items="{{menu}}">
          <paper-fab data-balloon$="{{item.label}}" title="{{item.label}}" data-balloon-pos="left" mini icon="{{item.icon}}"></paper-fab>
        </template>
      </div>
    </iron-dropdown>

  </template>
</dom-module>
<script>
  Polymer({
    is: "fab-menu",
    properties: {
      label: {type: String},
      icon: String,
      action: String,
      /* Array of {label:"the label", icon: "the icon", menu: []} */
      menu: {type: Array},
      backIcon: String,
      _mainIcon: {computed: "getMainIcon(icon, backIcon, _up)"},
    },
    toggle: function() {
      if (!this.$.dropdown.opened) {
        this.$.dropdown.open()
      } else {
        this.$.dropdown.close()
      }
    },
    getMainIcon: function(icon, backIcon, up) {
      if (up) {
        return backIcon 
      } else {
        return icon 
      }
    },
    debuggerer: function(a,b) {
      debugger
    }
  })
</script>
